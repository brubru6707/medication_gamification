<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mouse Panning Demo - Visual Guide</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            color: white;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .subtitle {
            text-align: center;
            margin-bottom: 30px;
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .demo-section {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }
        
        .demo-section h2 {
            margin-bottom: 20px;
            border-bottom: 3px solid white;
            padding-bottom: 10px;
        }
        
        #interactive-demo {
            background: #2c3e50;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            cursor: grab;
            user-select: none;
            position: relative;
            overflow: hidden;
            min-height: 400px;
        }
        
        #interactive-demo.dragging {
            cursor: grabbing;
        }
        
        .demo-instruction {
            font-size: 1.2em;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        
        .platform-container {
            position: relative;
            height: 300px;
            margin: 20px auto;
            perspective: 1000px;
        }
        
        .platform {
            position: absolute;
            left: 50%;
            transform-origin: center;
            transition: transform 0.1s ease-out;
        }
        
        .platform-3d {
            width: 200px;
            height: 40px;
            position: relative;
        }
        
        .platform-top {
            background: #00DD00;
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            border-radius: 5px;
        }
        
        .platform-front {
            background: #009900;
            width: 100%;
            height: 10px;
            position: absolute;
            bottom: -10px;
            border-radius: 0 0 5px 5px;
        }
        
        .platform-side {
            background: #006600;
            width: 10px;
            height: 50px;
            position: absolute;
            right: -10px;
            top: 0;
            border-radius: 0 5px 5px 0;
        }
        
        .platform.depth-0 {
            top: 250px;
            filter: brightness(0.7);
        }
        
        .platform.depth-1 {
            top: 150px;
            filter: brightness(0.85);
        }
        
        .platform.depth-2 {
            top: 50px;
            filter: brightness(1);
        }
        
        #angle-display {
            margin-top: 20px;
            font-size: 1.5em;
            font-weight: bold;
            font-family: 'Courier New', monospace;
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 10px;
            display: inline-block;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .info-card {
            background: rgba(0,0,0,0.2);
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #4CAF50;
        }
        
        .info-card h3 {
            margin-bottom: 10px;
            color: #4CAF50;
        }
        
        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            margin: 15px 0;
        }
        
        .keyword { color: #569cd6; }
        .string { color: #ce9178; }
        .number { color: #b5cea8; }
        .comment { color: #6a9955; }
        .function { color: #dcdcaa; }
        
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        .before, .after {
            padding: 20px;
            border-radius: 10px;
        }
        
        .before {
            background: rgba(255,0,0,0.2);
            border: 2px solid #ff4444;
        }
        
        .after {
            background: rgba(0,255,0,0.2);
            border: 2px solid #44ff44;
        }
        
        .before h3::before {
            content: "‚ùå ";
        }
        
        .after h3::before {
            content: "‚úÖ ";
        }
        
        .highlight {
            background: rgba(255,255,0,0.3);
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üñ±Ô∏è Mouse Panning Demo</h1>
        <p class="subtitle">Visual Guide to Your Fixed 2.5D Camera System</p>
        
        <div class="demo-section">
            <h2>üéÆ Interactive Demo - TRY IT!</h2>
            <div id="interactive-demo">
                <div class="demo-instruction">üëÜ Click and Drag to Rotate! üëÜ</div>
                <div class="platform-container">
                    <div class="platform depth-0" data-depth="0">
                        <div class="platform-3d">
                            <div class="platform-top"></div>
                            <div class="platform-front"></div>
                            <div class="platform-side"></div>
                        </div>
                    </div>
                    <div class="platform depth-1" data-depth="1">
                        <div class="platform-3d">
                            <div class="platform-top"></div>
                            <div class="platform-front"></div>
                            <div class="platform-side"></div>
                        </div>
                    </div>
                    <div class="platform depth-2" data-depth="2">
                        <div class="platform-3d">
                            <div class="platform-top"></div>
                            <div class="platform-front"></div>
                            <div class="platform-side"></div>
                        </div>
                    </div>
                </div>
                <div id="angle-display">Angle: 0.00 rad (0¬∞)</div>
            </div>
        </div>
        
        <div class="demo-section">
            <h2>üîß What Was Fixed</h2>
            <div class="comparison">
                <div class="before">
                    <h3>Before (Buggy)</h3>
                    <div class="code-block">
<span class="comment">// Platform shrinking bug!</span>
platform.<span class="function">setScale</span>(
    platform.scaleX * scaleEffect,
    platform.scaleY
);

<span class="comment">// Problem: Multiplies current scale</span>
<span class="comment">// Frame 1: 0.5 * 0.9 = 0.45</span>
<span class="comment">// Frame 2: 0.45 * 0.9 = 0.405 ‚ùå</span>
<span class="comment">// Frame 3: 0.405 * 0.9 = 0.365 ‚ùå</span>
<span class="comment">// Eventually disappears!</span>
                    </div>
                    <p>Platforms accumulated the scale effect each frame, causing them to shrink until they disappeared.</p>
                </div>
                
                <div class="after">
                    <h3>After (Fixed)</h3>
                    <div class="code-block">
<span class="comment">// Perfect scaling!</span>
platform.<span class="function">setScale</span>(
    platform.originalScaleX * scaleEffect,
    platform.originalScaleY
);

<span class="comment">// Solution: Always use original</span>
<span class="comment">// Frame 1: 0.5 * 0.9 = 0.45</span>
<span class="comment">// Frame 2: 0.5 * 0.9 = 0.45 ‚úÖ</span>
<span class="comment">// Frame 3: 0.5 * 0.9 = 0.45 ‚úÖ</span>
<span class="comment">// Stays consistent!</span>
                    </div>
                    <p>By storing and using the original scale, platforms maintain their proper size throughout all rotations.</p>
                </div>
            </div>
        </div>
        
        <div class="demo-section">
            <h2>üìê The Math Behind It</h2>
            <div class="info-grid">
                <div class="info-card">
                    <h3>Position Offset</h3>
                    <div class="code-block">
<span class="keyword">const</span> xOffset = 
    <span class="function">Math.sin</span>(cameraAngle) 
    * (depth + <span class="number">1</span>) * <span class="number">30</span>;

<span class="keyword">const</span> yOffset = 
    <span class="function">Math.cos</span>(cameraAngle) 
    * (depth + <span class="number">1</span>) * <span class="number">10</span>;
                    </div>
                    <p>Platforms at different depths move different amounts, creating parallax.</p>
                </div>
                
                <div class="info-card">
                    <h3>Scale Effect</h3>
                    <div class="code-block">
<span class="keyword">const</span> scaleEffect = 
    <span class="number">1</span> - (<span class="function">Math.abs</span>(<span class="function">Math.sin</span>(angle)) 
    * <span class="number">0.1</span>);

<span class="comment">// At 0¬∞: scale = 1.0</span>
<span class="comment">// At 90¬∞: scale = 0.9</span>
<span class="comment">// Back to 0¬∞: scale = 1.0</span>
                    </div>
                    <p>Platforms shrink slightly when rotated to enhance the 3D effect.</p>
                </div>
                
                <div class="info-card">
                    <h3>Mouse Sensitivity</h3>
                    <div class="code-block">
<span class="keyword">const</span> deltaX = 
    pointer.x - lastPointerX;

cameraAngle += 
    deltaX * <span class="number">0.005</span>;
                    </div>
                    <p>Sensitivity of <span class="highlight">0.005</span> provides smooth, proportional rotation.</p>
                </div>
                
                <div class="info-card">
                    <h3>Depth Layers</h3>
                    <div class="code-block">
<span class="comment">// Ground (farthest)</span>
depth = <span class="number">0</span>

<span class="comment">// Mid platforms</span>
depth = <span class="number">1</span>

<span class="comment">// Close platforms</span>
depth = <span class="number">2</span>

<span class="comment">// Characters (2D on top)</span>
depth = <span class="number">10</span>
                    </div>
                    <p>Higher depth = more movement = appears closer.</p>
                </div>
            </div>
        </div>
        
        <div class="demo-section">
            <h2>üéØ Key Improvements</h2>
            <div class="info-grid">
                <div class="info-card">
                    <h3>‚úÖ Fixed Platform Shrinking</h3>
                    <p>Platforms now maintain their original size by storing <code>originalScaleX</code> and <code>originalScaleY</code> values.</p>
                </div>
                
                <div class="info-card">
                    <h3>üñ±Ô∏è Mouse Drag Control</h3>
                    <p>Replaced keyboard controls (Q/E/R) with intuitive mouse drag-to-rotate functionality.</p>
                </div>
                
                <div class="info-card">
                    <h3>üé® Smooth Parallax</h3>
                    <p>Different depth layers create a believable 2.5D perspective effect.</p>
                </div>
                
                <div class="info-card">
                    <h3>‚ö° Performance</h3>
                    <p>No accumulation bugs, stable 60 FPS, clean efficient code.</p>
                </div>
            </div>
        </div>
        
        <div class="demo-section">
            <h2>üéÆ How to Use in Your Game</h2>
            <div class="code-block">
<span class="comment">// 1. Click and drag anywhere on the game canvas</span>
<span class="comment">// 2. Drag left = rotate camera left</span>
<span class="comment">// 3. Drag right = rotate camera right</span>
<span class="comment">// 4. Release mouse = stop rotation</span>

<span class="comment">// Movement (unchanged)</span>
<span class="comment">// Arrow keys = Move character</span>
<span class="comment">// 1 = Switch to Robitussin</span>
<span class="comment">// 2 = Switch to Albuterol</span>

<span class="comment">// Idle animations still work!</span>
<span class="comment">// Stand still for 1 second to see character come alive</span>
            </div>
        </div>
    </div>
    
    <script>
        // Interactive Demo Code
        const demo = document.getElementById('interactive-demo');
        const angleDisplay = document.getElementById('angle-display');
        const platforms = document.querySelectorAll('.platform');
        
        let isDragging = false;
        let lastPointerX = 0;
        let cameraAngle = 0;
        
        demo.addEventListener('mousedown', (e) => {
            isDragging = true;
            lastPointerX = e.clientX;
            demo.classList.add('dragging');
        });
        
        demo.addEventListener('mousemove', (e) => {
            if (isDragging) {
                const deltaX = e.clientX - lastPointerX;
                cameraAngle += deltaX * 0.005;
                lastPointerX = e.clientX;
                updatePlatforms();
            }
        });
        
        demo.addEventListener('mouseup', () => {
            isDragging = false;
            demo.classList.remove('dragging');
        });
        
        demo.addEventListener('mouseleave', () => {
            isDragging = false;
            demo.classList.remove('dragging');
        });
        
        function updatePlatforms() {
            platforms.forEach(platform => {
                const depth = parseInt(platform.dataset.depth);
                const depthOffset = (depth + 1) * 30;
                const xOffset = Math.sin(cameraAngle) * depthOffset;
                const yOffset = Math.cos(cameraAngle) * 10 * (depth + 1);
                const scaleEffect = 1 - (Math.abs(Math.sin(cameraAngle)) * 0.1);
                
                platform.style.transform = `
                    translateX(calc(-50% + ${xOffset}px))
                    translateY(${yOffset}px)
                    scale(${scaleEffect})
                `;
            });
            
            // Update angle display
            const degrees = (cameraAngle * 180 / Math.PI).toFixed(1);
            angleDisplay.textContent = `Angle: ${cameraAngle.toFixed(2)} rad (${degrees}¬∞)`;
        }
        
        // Initial render
        updatePlatforms();
    </script>
</body>
</html>
